(this["webpackJsonpreact-battleship"]=this["webpackJsonpreact-battleship"]||[]).push([[0],{10:function(t,a,e){t.exports=e(16)},15:function(t,a,e){},16:function(t,a,e){"use strict";e.r(a);var r=e(0),n=e.n(r),s=e(7),i=e.n(s),o=e(9),p=e(8),c=e(1),h=e(2),u=e(4),l=e(3),d=function(t,a){return(a-t.x)/t.width},m=function(t){Object(u.a)(e,t);var a=Object(l.a)(e);function e(){var t;Object(c.a)(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=a.call.apply(a,[this].concat(n))).dragStart=function(a){var e=d(a.target.getBoundingClientRect(),a.clientX),r=Math.floor(e*t.props.hits.parts.length),n={shipNumber:a.target.getAttribute("data-value"),shipArea:r};a.dataTransfer.setData("ship-data",JSON.stringify(n))},t.dragOver=function(t){t.stopPropagation()},t}return Object(h.a)(e,[{key:"render",value:function(){var t=this,a=this.props.hits.parts.map((function(a,e){return n.a.createElement("div",{key:e,name:e,"data-value":a,className:"ship-piece",id:"".concat(t.props.entrant,"-").concat(t.props.title,"-").concat(e)})}));return n.a.createElement("div",{id:"".concat(this.props.entrant,"-").concat(this.props.title),name:this.props.title,"data-value":this.props.shipNumber,"data-orientation":this.props.orientation,draggable:this.props.draggable,onDragStart:this.dragStart,onDragOver:this.dragOver,unselectable:"on","user-select":"none"},n.a.createElement("h3",{className:"piece-heading"},"horizontal"===this.props.orientation&&this.props.title),n.a.createElement("div",{className:"ship-div ".concat(this.props.title," ").concat(!0===this.props.sunk?"sunk":""," ").concat("vertical"===this.props.orientation?"vertical":""," ").concat(this.props.onBoard?"placed":""," unselectable")},a))}}]),e}(r.Component),f=function(t){Object(u.a)(e,t);var a=Object(l.a)(e);function e(){var t;Object(c.a)(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=a.call.apply(a,[this].concat(n))).drop=function(a){a.preventDefault();var e=JSON.parse(a.dataTransfer.getData("ship-data")),r=e.shipNumber,n=e.shipArea;try{if(!r||"false"===r)throw new Error("that's not a ship lol")}catch(a){return void console.log(a)}t.props.placeShip(r,Number(a.target.getAttribute("name")),t.props.entrantNumber,n)},t.dragOver=function(t){t.preventDefault()},t.hit=function(a){t.props.boardHit&&t.props.boardHit(a.target.getAttribute("name"))},t}return Object(h.a)(e,[{key:"render",value:function(){var t=this,a=this.props.cells.map((function(a,e){return n.a.createElement("div",{className:"cell ".concat(a.status),"data-value":a.status,name:e,key:e,"data-ship-number":a.shipNumber,"data-ship-area":a.shipArea,id:"".concat(t.props.entrantNumber,"-").concat(e),onClick:t.hit,onDrop:t.drop,onDragOver:t.dragOver},t.props.ship||"")}));return n.a.createElement("div",{className:"board",id:"board-".concat(this.props.entrantNumber)},a)}}]),e}(r.Component),v=function(t){Object(u.a)(e,t);var a=Object(l.a)(e);function e(){return Object(c.a)(this,e),a.apply(this,arguments)}return Object(h.a)(e,[{key:"render",value:function(){var t=this.props.message.map((function(t,a){return n.a.createElement("p",{key:a},"- ",t)}));return n.a.createElement("div",{id:"announcements",className:"announcements"},t)}}]),e}(r.Component),b=(e(15),function(t){var a=t.status,e=t.coordinate;if("miss"===a)return Math.floor(100*Math.random());var r,n=Math.floor(45*Math.random());return((r=n<10?e-1:n<20?e+1:n<30?e-10:n<40?e+10:Math.floor(100*Math.random()))<0||99<r)&&(r=Math.floor(100*Math.random())),r}),g=function(t,a){if("vertical"===a){var e=10*t;return Math.floor(Math.random()*(100-e))}for(var r=Math.floor(100*Math.random());r%10>10-t;)r=Math.floor(100*Math.random());return r},S=function(t){Object(u.a)(e,t);var a=Object(l.a)(e);function e(){var t;Object(c.a)(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=a.call.apply(a,[this].concat(n))).initialState={participants:[{ships:[{parts:[!1,!1,!1,!1,!1],onBoard:!1,name:"Carrier"},{parts:[!1,!1,!1,!1],onBoard:!1,name:"Battleship"},{parts:[!1,!1,!1],onBoard:!1,name:"Destroyer"},{parts:[!1,!1,!1],onBoard:!1,name:"Submarine"},{parts:[!1,!1],onBoard:!1,name:"Patrol"}],board:new Array(100).fill({status:"naw",shipNumber:void 0,shipArea:void 0})},{ships:[{parts:[!1,!1,!1,!1,!1],onBoard:!1,name:"Carrier"},{parts:[!1,!1,!1,!1],onBoard:!1,name:"Battleship"},{parts:[!1,!1,!1],onBoard:!1,name:"Destroyer"},{parts:[!1,!1,!1],onBoard:!1,name:"Submarine"},{parts:[!1,!1],onBoard:!1,name:"Patrol"}],board:new Array(100).fill({status:"naw",shipNumber:void 0,shipArea:void 0})}],orientation:"horizontal",gamestart:!1,message:["Drag or randomize to begin..."],lastCompAttack:{status:"miss",coordinate:0}},t.state=JSON.parse(JSON.stringify(t.initialState)),t.randomize=function(){t.state.gamestart||(t.placeRandomShips(0),t.startCheck())},t.placeRandomShip=function(a,e){for(var r=t.state.participants[e].ships[a].parts.length,n=Math.random()<.5?"horizontal":"vertical",s="horizontal"===n?1:10,i=g(r,n),o=[],p=0;p<r;p++){var c=i+p*s;if("ship"===t.state.participants[e].board[c].status){o=[];break}o.push(i+p*s)}return o},t.placeRandomShips=function(a){for(var e=0;e<5;e++)if(!t.state.participants[a].ships[e].onBoard){for(var r=[];r.length<1;)r=t.placeRandomShip(e,a);t.distributeShip(r,e,a)}},t.placeShip=function(a,e,r,n){var s,i=[],o=t.state.participants[r].ships[a].parts.length,p="horizontal"===t.state.orientation?1:10;s=e-n*p;try{for(var c=0;c<o;c++){var h=s+c*p;if(h>99)throw new Error("yr off the board");if(c>0&&h%10===0)throw new Error("yr off the board");if("ship"===t.state.participants[r].board[h].status)throw new Error("yr on another ship bud");i.push(s+c*p)}}catch(u){return void console.log(u)}t.distributeShip(i,a,r),t.startCheck()},t.distributeShip=function(a,e,r){var n,s=Object(p.a)(a.entries());try{for(s.s();!(n=s.n()).done;){var i=Object(o.a)(n.value,2),c=i[0],h=i[1];t.boardStateUpdate(h,r,e,c)}}catch(u){s.e(u)}finally{s.f()}},t.boardStateUpdate=function(a,e,r,n){var s=t.state;s.participants[e].ships[r].onBoard=!0,s.participants[e].board[a].status="ship",s.participants[e].board[a].shipArea=n,s.participants[e].board[a].shipNumber=r,t.setState(s)},t.playerTurnEnd=function(a){var e=t.state.participants[1].board[a].status;try{if("naw"!==e&&"ship"!==e)throw new Error("you can't click there")}catch(s){return void console.log(s)}var r=t.onBoardHit(a,1);try{if(!r)throw new Error("It's over!")}catch(s){return void console.log(s)}for(var n=b(t.state.lastCompAttack);"ship"!==t.state.participants[0].board[n].status&&"naw"!==t.state.participants[0].board[n].status;)n=b(t.state.lastCompAttack);r=t.onBoardHit(n,0);try{if(!r)throw new Error("It's over!")}catch(s){return void console.log(s)}},t.onBoardHit=function(a,e){var r=t.state,n=r.participants[e].board[a].status;if("naw"===n)return r.participants[e].board[a].status="miss",e?t.messageUpdate("Your attack misses!"):(r.lastCompAttack={status:"miss",coordinate:a},t.messageUpdate("The computer's attack misses!")),!0;if("ship"===n){r.participants[e].board[a].status="hit",e?t.messageUpdate("Your attack hits!"):(r.lastCompAttack={status:"hit",coordinate:a},t.messageUpdate("The computer's attack hits!"));var s=r.participants[e].board[a],i=s.shipArea,o=s.shipNumber;return t.setState(r),t.onShipHit(i,o,e)}},t.onShipHit=function(a,e,r){var n=t.state;return n.participants[r].ships[e].parts[a]=!0,n.participants[r].ships[e].parts.some((function(t){return!1===t}))||(r?t.messageUpdate("The computer's ".concat(n.participants[r].ships[e].name.toLowerCase()," has sunk!")):t.messageUpdate("Your ".concat(n.participants[r].ships[e].name.toLowerCase()," has sunk!"))),t.setState(n),t.winCheck(r)},t.winCheck=function(a){var e;return e=0===a?1:0,!!t.state.participants[a].ships.find((function(t){return t.parts.some((function(t){return!1===t}))}))||t.reset(e)},t.changeOrientation=function(){var a;a="horizontal"===t.state.orientation?"vertical":"horizontal",t.setState({orientation:a})},t.reset=function(a){var e=JSON.parse(JSON.stringify(t.initialState));0===a?e.message=["You win! You're a hero!"]:1===a&&(e.message=["You lose! The computer is so smart!"]),t.setState(e)},t.messageUpdate=function(a){var e=t.state;e.message.push(a),e.message.length>12&&e.message.shift(),t.setState(e)},t}return Object(h.a)(e,[{key:"startCheck",value:function(){if(!this.state.participants[0].ships.some((function(t){return!1===t.onBoard}))){var t=this.state;t.gamestart=!0,this.messageUpdate("The game begins!"),this.setState(t),this.placeRandomShips(1)}}},{key:"render",value:function(){var t=this,a=function(a,e){return n.a.createElement(f,{entrantNumber:a,placeShip:t.placeShip,cells:t.state.participants[a].board,boardHit:e,onShipPlacement:t.onShipPlacement})},e=function(a,e){return n.a.createElement(m,{entrant:a,shipNumber:e,title:t.state.participants[a].ships[e].name,orientation:t.state.orientation,board:t.state.participants[a].board,onBoard:t.state.participants[a].ships[e].onBoard,draggable:!a&&!t.state.participants[a].ships[e].onBoard,hits:t.state.participants[a].ships[e],sunk:!t.state.participants[a].ships[e].parts.some((function(t){return!1===t})),onShipHit:t.onShipHit})};return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"boards"},n.a.createElement("div",null,n.a.createElement("h2",{className:"board-header"},this.state.gamestart?"Your board":"Set up your board"),a(0,null),n.a.createElement("div",{className:"entrant-pieces"},e(0,0),e(0,1),e(0,2),e(0,3),e(0,4))),n.a.createElement("div",null,n.a.createElement("h2",{className:"board-header"},"Opponent's board"),a(1,this.state.gamestart?this.playerTurnEnd:null),n.a.createElement("div",{className:"entrant-pieces"},e(1,0),e(1,1),e(1,2),e(1,3),e(1,4))),n.a.createElement("div",{className:"parent-announcements"},n.a.createElement("div",{className:"commands"},n.a.createElement("button",{className:"randomize",onClick:this.randomize},"Randomize"),n.a.createElement("button",{className:"orient",onClick:this.changeOrientation},"Orientation"),n.a.createElement("button",{className:"reset",onClick:function(){return t.reset(-1)}},"Reset")),n.a.createElement(v,{message:this.state.message}))))}}]),e}(r.Component);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(S,null)),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.e3f0bb89.chunk.js.map