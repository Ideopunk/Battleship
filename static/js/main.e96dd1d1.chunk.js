(this["webpackJsonpreact-battleship"]=this["webpackJsonpreact-battleship"]||[]).push([[0],{10:function(t,a,e){t.exports=e(16)},15:function(t,a,e){},16:function(t,a,e){"use strict";e.r(a);var r=e(0),n=e.n(r),s=e(7),o=e.n(s),i=e(9),c=e(8),p=e(1),l=e(2),h=e(4),u=e(3),d=function(t,a,e){return(e-t.x)/t.width},m=function(t){Object(h.a)(e,t);var a=Object(u.a)(e);function e(){var t;Object(p.a)(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=a.call.apply(a,[this].concat(n))).dragStart=function(a){var e=d(a.target.getBoundingClientRect(),a.clientY,a.clientX),r=Math.floor(e*t.props.hits.parts.length),n={shipNumber:a.target.getAttribute("data-value"),shipArea:r};a.dataTransfer.setData("ship-data",JSON.stringify(n))},t.dragOver=function(t){t.stopPropagation()},t}return Object(l.a)(e,[{key:"render",value:function(){var t=this,a=this.props.hits.parts.map((function(a,e){return n.a.createElement("div",{key:e,name:e,"data-value":a,className:"ship-piece",id:"".concat(t.props.entrant,"-").concat(t.props.title,"-").concat(e)})}));return n.a.createElement("div",{id:"".concat(this.props.entrant,"-").concat(this.props.title),name:this.props.title,"data-value":this.props.shipNumber,"data-orientation":this.props.orientation,draggable:this.props.draggable,onDragStart:this.dragStart,onDragOver:this.dragOver,unselectable:"on","user-select":"none"},n.a.createElement("h3",{className:"piece-heading"},"horizontal"===this.props.orientation&&this.props.title),n.a.createElement("div",{className:"ship-div ".concat(this.props.title," ").concat(!0===this.props.sunk?"sunk":""," ").concat("vertical"===this.props.orientation?"vertical":""," ").concat(this.props.onBoard?"placed":""," unselectable")},a))}}]),e}(r.Component),f=function(t){Object(h.a)(e,t);var a=Object(u.a)(e);function e(){var t;Object(p.a)(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=a.call.apply(a,[this].concat(n))).drop=function(a){a.preventDefault();var e=JSON.parse(a.dataTransfer.getData("ship-data")),r=e.shipNumber,n=e.shipArea;try{if(!r||"false"===r)throw new Error("that's not a ship lol")}catch(a){return void console.log(a)}t.props.placeShip(r,Number(a.target.getAttribute("name")),t.props.entrantNumber,n)},t.dragOver=function(t){t.preventDefault()},t.hit=function(a){t.props.boardHit&&t.props.boardHit(a.target.getAttribute("data-value"),a.target.getAttribute("name"))},t}return Object(l.a)(e,[{key:"render",value:function(){var t=this,a=this.props.cells.map((function(a,e){return n.a.createElement("div",{className:"cell ".concat(a.status),"data-value":a.status,name:e,key:e,"data-ship-number":a.shipNumber,"data-ship-area":a.shipArea,id:"".concat(t.props.entrantNumber,"-").concat(e),onClick:t.hit,onDrop:t.drop,onDragOver:t.dragOver},t.props.ship||"")}));return n.a.createElement("div",{className:"board",id:"board-".concat(this.props.entrantNumber)},a)}}]),e}(r.Component),b=function(t){Object(h.a)(e,t);var a=Object(u.a)(e);function e(){return Object(p.a)(this,e),a.apply(this,arguments)}return Object(l.a)(e,[{key:"render",value:function(){var t=this.props.message.map((function(t,a){return n.a.createElement("p",{key:a},"- ",t)}));return n.a.createElement("div",{id:"announcements",className:"announcements"},t)}}]),e}(r.Component),v=(e(15),function(t){var a=t.status,e=t.coordinate;if("miss"===a)return Math.floor(100*Math.random());var r,n=Math.floor(45*Math.random());return((r=n<10?e-1:n<20?e+1:n<30?e-10:n<40?e+10:Math.floor(100*Math.random()))<0||99<r)&&(r=Math.floor(100*Math.random())),r}),g=function(t,a){if("vertical"===a){var e=10*t;return Math.floor(Math.random()*(100-e))}for(var r=Math.floor(100*Math.random());r%10>10-t;)r=Math.floor(100*Math.random());return r},S=function(t){Object(h.a)(e,t);var a=Object(u.a)(e);function e(){var t;Object(p.a)(this,e);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=a.call.apply(a,[this].concat(n))).initialState={participants:[{ships:[{parts:[!1,!1,!1,!1,!1],onBoard:!1,name:"Carrier"},{parts:[!1,!1,!1,!1],onBoard:!1,name:"Battleship"},{parts:[!1,!1,!1],onBoard:!1,name:"Destroyer"},{parts:[!1,!1,!1],onBoard:!1,name:"Submarine"},{parts:[!1,!1],onBoard:!1,name:"Patrol"}],board:new Array(100).fill({status:"naw",shipNumber:void 0,shipArea:void 0})},{ships:[{parts:[!1,!1,!1,!1,!1],onBoard:!1,name:"Carrier"},{parts:[!1,!1,!1,!1],onBoard:!1,name:"Battleship"},{parts:[!1,!1,!1],onBoard:!1,name:"Destroyer"},{parts:[!1,!1,!1],onBoard:!1,name:"Submarine"},{parts:[!1,!1],onBoard:!1,name:"Patrol"}],board:new Array(100).fill({status:"naw",shipNumber:void 0,shipArea:void 0})}],orientation:"horizontal",gamestart:!1,message:["Drag or randomize to begin..."],lastCompAttack:{status:"miss",coordinate:0}},t.state=JSON.parse(JSON.stringify(t.initialState)),t.randomize=function(){t.state.gamestart||(t.placeRandomShips(0),t.startCheck())},t.placeRandomShip=function(a,e){for(var r=t.state.participants[e].ships[a].parts.length,n=Math.random()<.5?"horizontal":"vertical",s="horizontal"===n?1:10,o=g(r,n),i=[],c=0;c<r;c++){var p=o+c*s;if("ship"===t.state.participants[e].board[p].status){i=[];break}i.push(o+c*s)}return i},t.placeRandomShips=function(a){for(var e=0;e<5;e++)if(!t.state.participants[a].ships[e].onBoard){for(var r=[];r.length<1;)r=t.placeRandomShip(e,a);t.distributeShip(r,e,a)}},t.placeShip=function(a,e,r,n){var s,o=[],i=t.state.participants[r].ships[a].parts.length,c="horizontal"===t.state.orientation?1:10;s=e-n*c;try{for(var p=0;p<i;p++){var l=s+p*c;if(l>99)throw new Error("yr off the board");if(p>0&&l%10===0)throw new Error("yr off the board");if("ship"===t.state.participants[r].board[l].status)throw new Error("yr on another ship bud");o.push(s+p*c)}}catch(h){return void console.log(h)}t.distributeShip(o,a,r),t.startCheck()},t.distributeShip=function(a,e,r){var n,s=Object(c.a)(a.entries());try{for(s.s();!(n=s.n()).done;){var o=Object(i.a)(n.value,2),p=o[0],l=o[1];t.boardStateUpdate(l,r,e,p)}}catch(h){s.e(h)}finally{s.f()}},t.boardStateUpdate=function(a,e,r,n){var s=t.state;s.participants[e].ships[r].onBoard=!0,s.participants[e].board[a].status="ship",s.participants[e].board[a].shipArea=n,s.participants[e].board[a].shipNumber=r,t.setState(s)},t.playerTurnEnd=function(a,e){try{if("naw"!==a&&"ship"!==a)throw new Error("you can't click there")}catch(o){return void console.log(o)}var r=t.onBoardHit(a,e,1);try{if(!r)throw new Error("It's over!")}catch(o){return void console.log(o)}console.log(t.state.gamestart),console.log(t.state.gamestart);var n=v(t.state.lastCompAttack);console.log(n);for(var s=t.state.participants[0].board[n].status;"ship"!==t.state.participants[0].board[n].status&&"naw"!==t.state.participants[0].board[n].status;)n=v(t.state.lastCompAttack),console.log(n),s=t.state.participants[0].board[n].status;r=t.onBoardHit(s,n,0);try{if(!r)throw new Error("It's over!")}catch(o){return void console.log(o)}},t.onBoardHit=function(a,e,r){var n=t.state;if("naw"===a)return n.participants[r].board[e].status="miss",r?t.messageUpdate("Your attack misses!"):(n.lastCompAttack={status:"miss",coordinate:e},t.messageUpdate("The computer's attack misses!")),!0;if("ship"===a){n.participants[r].board[e].status="hit",r?t.messageUpdate("Your attack hits!"):(n.lastCompAttack={status:"hit",coordinate:e},t.messageUpdate("The computer's attack hits!"));var s="".concat(r,"-").concat(e),o=document.getElementById(s),i=o.getAttribute("data-ship-area"),c=o.getAttribute("data-ship-number");return t.setState(n),t.onShipHit(i,c,r)}},t.onShipHit=function(a,e,r){console.log("onshiphit!");var n=t.state;return n.participants[r].ships[e].parts[a]=!0,n.participants[r].ships[e].parts.some((function(t){return!1===t}))||(r?t.messageUpdate("The computer's ".concat(n.participants[r].ships[e].name.toLowerCase()," has sunk!")):t.messageUpdate("Your ".concat(n.participants[r].ships[e].name.toLowerCase()," has sunk!"))),console.log(n),t.setState(n),t.winCheck(r)},t.winCheck=function(a){var e;e=0===a?1:0,console.log(e);var r=t.state.participants[a].ships.find((function(t){return t.parts.some((function(t){return!1===t}))}));return console.log(t.state),!!r||t.winCelebration(e)},t.winCelebration=function(a){return console.log(t.state.gamestart),t.reset(a)},t.changeOrientation=function(){var a;a="horizontal"===t.state.orientation?"vertical":"horizontal",t.setState({orientation:a})},t.reset=function(a){console.log(t.initialState);var e=JSON.parse(JSON.stringify(t.initialState));0===a?e.message=["You win! You're a hero!"]:1===a&&(e.message=["You lose! The computer is so smart!"]),t.setState(e)},t.messageUpdate=function(a){var e=t.state;e.message.push(a),e.message.length>12&&e.message.shift(),t.setState(e)},t}return Object(l.a)(e,[{key:"startCheck",value:function(){if(!this.state.participants[0].ships.some((function(t){return!1===t.onBoard}))){var t=this.state;t.gamestart=!0,this.messageUpdate("The game begins!"),this.setState(t),this.placeRandomShips(1)}}},{key:"render",value:function(){var t=this,a=function(a,e){return n.a.createElement(f,{entrantNumber:a,placeShip:t.placeShip,cells:t.state.participants[a].board,boardHit:e,onShipPlacement:t.onShipPlacement})},e=function(a,e){return n.a.createElement(m,{entrant:a,shipNumber:e,title:t.state.participants[a].ships[e].name,orientation:t.state.orientation,board:t.state.participants[a].board,onBoard:t.state.participants[a].ships[e].onBoard,draggable:!a&&!t.state.participants[a].ships[e].onBoard,hits:t.state.participants[a].ships[e],sunk:!t.state.participants[a].ships[e].parts.some((function(t){return!1===t})),onShipHit:t.onShipHit})};return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"boards"},n.a.createElement("div",null,n.a.createElement("h2",{className:"board-header"},this.state.gamestart?"Your board":"Set up your board"),a(0,null),n.a.createElement("div",{className:"entrant-pieces"},e(0,0),e(0,1),e(0,2),e(0,3),e(0,4))),n.a.createElement("div",null,n.a.createElement("h2",{className:"board-header"},"Opponent's board"),a(1,this.state.gamestart?this.playerTurnEnd:null),n.a.createElement("div",{className:"entrant-pieces"},e(1,0),e(1,1),e(1,2),e(1,3),e(1,4))),n.a.createElement("div",{className:"parent-announcements"},n.a.createElement(b,{message:this.state.message}),n.a.createElement("div",{className:"commands"},n.a.createElement("button",{onClick:this.randomize},"Randomize"),n.a.createElement("button",{onClick:this.changeOrientation},"Change ship orientation"),n.a.createElement("button",{onClick:function(){return t.reset(-1)}},"Reset")))))}}]),e}(r.Component);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(S,null)),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.e96dd1d1.chunk.js.map